<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="theme-color" content="#0A3D6B">
  <title>ì€í˜œêµíšŒ 2026 ë¶€ì‚° ì—¬í–‰ - AI íˆ¬ì–´ê°€ì´ë“œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0A3D6B; --accent: #FF5E3A; --text: #0F172A;
      --bg: #F8FAFC; --glass: rgba(255, 255, 255, 0.85);
      --glass-strong: rgba(255, 255, 255, 0.95);
      --shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
    }
    [data-theme="dark"] {
      --primary: #60A5FA; --accent: #FB923C; --text: #F1F5F9; --bg: #0F172A;
      --glass: rgba(30, 41, 59, 0.8); --glass-strong: rgba(15, 23, 42, 0.95);
    }

    * { margin:0; padding:0; box-sizing:border-box; -webkit-font-smoothing: antialiased; }
    body { font-family:'Noto Sans KR', sans-serif; background:var(--bg); color:var(--text); overflow: hidden; height: 100vh; }

    header {
      position:fixed; top:0; left:0; right:0; height:65px;
      background:var(--glass-strong); backdrop-filter:blur(20px);
      z-index:1000; display:flex; align-items:center; padding: 0 20px; border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    .menu-btn { background:none; border:none; font-size:1.6rem; color:var(--primary); cursor:pointer; }
    .main-title { font-family:'Playfair Display', serif; font-size:1.2rem; font-weight:800; color:var(--primary); flex:1; text-align:center; }

    /* ì—¬í–‰ ë¦¬ìŠ¤íŠ¸ & ë¸”ëŸ¬ íš¨ê³¼ */
    #travel-list {
      height: 100vh; overflow-y: scroll; scroll-snap-type: y mandatory;
      transition: filter 0.4s ease, transform 0.4s ease;
    }
    #travel-list.blurred { filter: blur(15px); transform: scale(0.98); pointer-events: none; }
    
    .travel-item { height: 100vh; width: 100%; scroll-snap-align: start; position: relative; background:#000; overflow:hidden; }
    .slide-container { position: absolute; width:100%; height:100%; }
    .slide-img { position: absolute; width:100%; height:100%; object-fit:cover; opacity:0; transition: opacity 1.5s ease; }
    .slide-img.active { opacity: 0.6; }
    .overlay { position:absolute; top:0; left:0; width:100%; height:100%; background: linear-gradient(to bottom, transparent 30%, rgba(0,0,0,0.85) 100%); }
    .travel-name { position:absolute; bottom:30%; width:100%; text-align:center; color:white; font-size:2.4rem; font-weight:700; text-shadow:0 4px 15px rgba(0,0,0,0.8); }

    .special-city .travel-name { color: #2E9AFE; }
    .special-city .overlay { background: linear-gradient(to bottom, transparent 30%, rgba(255, 94, 58, 0.35) 100%); }

    /* macOS ìŠ¤íƒ€ì¼ Dock (í•˜ë‹¨ ë°”) */
    .bottom-bar-container {
      position: fixed; bottom: 30px; left: 15px; right: 15px; z-index: 3000;
      display: flex; justify-content: center;
    }
    #detail-btn {
      width: 100%; max-width: 500px; height: 60px; background: var(--primary); color: white;
      border: none; border-radius: 20px; font-weight: 600; font-size: 1.05rem;
      box-shadow: var(--shadow); cursor: pointer; transition: 0.3s;
    }
    #detail-btn:active { transform: scale(0.96); }

    #chat-input-bar {
      display: none; background: var(--glass-strong); backdrop-filter: blur(25px);
      border-radius: 25px; padding: 8px 10px 8px 20px; align-items: center;
      box-shadow: var(--shadow); width: 100%; max-width: 600px; border: 1px solid rgba(255,255,255,0.2);
    }
    .chat-input { flex:1; background:none; border:none; outline:none; font-size:1rem; color:var(--text); height:45px; }
    .send-btn { width:45px; height:45px; border-radius:20px; background: var(--accent); color:white; border:none; cursor:pointer; font-weight:bold; }

    /* í”Œë¡œíŒ… ì±„íŒ…ì°½ */
    #chat-page {
      position: fixed; top: 80px; left: 15px; right: 15px; bottom: 110px;
      background: var(--glass-strong); backdrop-filter: blur(25px);
      border-radius: 30px; transform: translateY(120%) scale(0.9);
      transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1); z-index: 2000;
      box-shadow: var(--shadow); display: flex; flex-direction: column; border: 1px solid rgba(255,255,255,0.3);
    }
    #chat-page.active { transform: translateY(0) scale(1); }
    #chat-container { flex: 1; padding: 25px 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
    
    .message { padding: 14px 18px; border-radius: 22px; max-width: 85%; font-size: 0.95rem; line-height: 1.6; }
    .ai { background: white; color: #333; align-self: flex-start; box-shadow: 0 4px 10px rgba(0,0,0,0.05); }
    .user { background: var(--primary); color: white; align-self: flex-end; }
    
    .close-chat-btn { align-self: center; margin: 15px; background: rgba(0,0,0,0.05); border: none; padding: 8px 25px; border-radius: 20px; font-size: 0.9rem; cursor: pointer; color: var(--text-light); }

    /* ì‚¬ì´ë“œ ë©”ë‰´ */
    #side-menu {
      position: fixed; top:0; left:-300px; width:300px; height:100%; background:var(--glass-strong);
      z-index:4000; transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1); padding: 20px 25px; box-shadow: var(--shadow);
      display: flex; flex-direction: column;
    }
    #side-menu.active { left:0; }
    .menu-header { display:flex; justify-content:space-between; align-items:center; margin-bottom: 40px; margin-top: 10px; }
    .close-menu { background:none; border:none; font-size:1.5rem; cursor:pointer; color:var(--text); padding: 5px; }
    .menu-item { padding: 20px 0; border-bottom: 1px solid rgba(0,0,0,0.05); cursor:pointer; list-style:none; font-weight: 500; font-size: 1.05rem; }
    
    .loading-dots span { display: inline-block; width: 5px; height: 5px; background: #999; border-radius: 50%; animation: bounce 1.4s infinite; margin: 0 2px; }
    @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
  </style>
</head>
<body>

  <header>
    <button class="menu-btn" onclick="toggleMenu()">â˜°</button>
    <div class="main-title">2026 BUSAN AI TOUR</div>
    <div style="width:40px;"></div>
  </header>

  <nav id="side-menu">
    <div class="menu-header">
      <span style="font-weight:bold; font-size:1.2rem; color:var(--primary);">MENU</span>
      <button class="close-menu" onclick="toggleMenu()">âœ•</button>
    </div>
    
    <li class="menu-item" onclick="toggleDarkMode()">ğŸŒ“ ë‹¤í¬ëª¨ë“œ ì „í™˜</li>
    
    <div style="margin-top: 20px; font-size: 0.85rem; color: #888; font-weight: 700;">ì¶”ì–µ ì €ì¥ì†Œ</div>
    <li class="menu-item" onclick="window.open('https://1drv.ms/f/c/bc6b22175b386590/IgDRKtGhMsdNRINyciftsO6oAfs0f_LhF4EDGlSXlGnWw-Q?e=BRFSfr', '_blank')">ğŸ“¸ ê°ì ì°ì€ ì‚¬ì§„ ì˜¬ë¦¬ëŠ” ë°©</li>

    <div style="margin-top: 20px; font-size: 0.85rem; color: #888; font-weight: 700;">ì´ë™í•  ë•Œ í•˜ëŠ” ê²Œì„</div>
    <li class="menu-item" onclick="window.open('https://www.google.com/logos/2010/pacman10-i.html', '_blank')">ğŸ® íŒ©ë§¨ (Pac-Man)</li>
    <li class="menu-item" onclick="window.open('https://tetris.com/play-tetris', '_blank')">ğŸ§± í…ŒíŠ¸ë¦¬ìŠ¤ (Tetris)</li>
    <li class="menu-item" onclick="window.open('https://elgoog.im/t-rex/', '_blank')">ğŸ¦– ê³µë£¡ ë‹¬ë¦¬ê¸° (Dino Run)</li>

    <div style="margin-top: 20px; font-size: 0.85rem; color: #888; font-weight: 700;">ì •ë³´</div>
    <li class="menu-item" onclick="alert('2026 ë¶€ì‚° ê°€ì´ë“œ (Final)\nì •ì‹ ë°°í¬íŒ.\nì±—ë´‡ì€ Perplexity APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.')">â„¹ï¸ í˜ì´ì§€ ì •ë³´</li>
    <li class="menu-item" onclick="alert('Developer: ê¹€ì„±ë¯¼ & Gemini AI')">ğŸ‘¨â€ğŸ’» ê°œë°œì ì •ë³´</li>
  </nav>

  <div id="travel-list">
    <div class="travel-item special-city" data-name="ë¶€ì‚°ê´‘ì—­ì‹œ" 
         data-info="[ì—­ì‚¬] ë¶€ì‚°ì€ ê³ ëŒ€ ê±°ì¹ ì‚°êµ­ë¶€í„° ì¡°ì„ ì‹œëŒ€ ë¶€ì‚°í¬ë¥¼ ê±°ì³ ì„±ì¥í•œ í•­êµ¬ë„ì‹œì…ë‹ˆë‹¤. 1950ë…„ í•œêµ­ì „ìŸ ë‹¹ì‹œ í”¼ë€ìˆ˜ë„ë¡œì„œ ì¸êµ¬ê°€ í­ë°œí•˜ë©° ê°ì²œë¬¸í™”ë§ˆì„ ê°™ì€ í„°ì „ì´ ìƒê²¼ìŠµë‹ˆë‹¤. [í˜„ì¬] 2025ë…„ 12ì›” ê¸°ì¤€ ì¸êµ¬ ì•½ 319ë§Œ ëª…, ì™¸êµ­ì¸ ê´€ê´‘ê° 300ë§Œ ëª…ì„ ëŒíŒŒí–ˆìŠµë‹ˆë‹¤. [ë¯¸ë˜] 2030ë…„ ê°€ë•ë„ ì‹ ê³µí•­ ê°œí•­ê³¼ 2026ë…„ ì—¬ë¦„ ë¶ê·¹í•­ë¡œ ì‹œë²” ìš´í•­ì„ í†µí•´ ê¸€ë¡œë²Œ ë¬¼ë¥˜/ê´€ê´‘ í—ˆë¸Œë¡œ ë„ì•½í•˜ê³  ìˆìŠµë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://dimg.donga.com/wps/NEWS/IMAGE/2015/02/26/69816551.1.jpg", "https://i.namu.wiki/i/5-8cEazigkS5JZBGM4dQ2MIRlvLVPhb2L_AdNAWQKTqgVtlqXXOHkn9zycbq0sDOCDIBqhwm8Oxgd9WHhOFIHA.webp", "https://visitbusan.net/uploadImgs/files/cntnts/20200703155006481_oen", "https://i.namu.wiki/i/TGNXtULyaRdmGVmuJ8Pp7scSLnGMKMljqg-GIvxIzJMOqW669MTrEXa9u25Ff0IiePBNt3ovDSC_fTYzurAUTw.svg", "https://www.telltrip.com/wp-content/uploads/2025/05/Gamcheon-Culture-Village2.jpg"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">ë¶€ì‚°ê´‘ì—­ì‹œ</div>
    </div>

    <div class="travel-item" data-name="ë§¤ì¶•ì§€ë§ˆì„" 
         data-info="[ìœ„ì¹˜] ë¶€ì‚° ë™êµ¬ ë²”ì¼ë™ ì¼ëŒ€. [ì—­ì‚¬] ì¼ì œê°•ì ê¸° êµ°ë§ˆ(ë§) ë³´ê´€ì„ ìœ„í•´ ë°”ë‹¤ë¥¼ ë©”ìš´ ë•…ì…ë‹ˆë‹¤. í•´ë°© í›„ í”¼ë€ë¯¼ë“¤ì´ ë§ˆêµ¬ê°„ì„ ê°œì¡°í•´ ì‚´ë©´ì„œ í˜•ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. [íŠ¹ì§•] ì˜í™” 'ì•„ì €ì”¨', 'ì¹œêµ¬' ì´¬ì˜ì§€ë¡œ ìœ ëª…í•˜ë©° 'ì‹œê°„ì´ ë©ˆì¶˜ ë§ˆì„'ë¡œ ë¶ˆë¦½ë‹ˆë‹¤. [í˜„ì¬] ë‘ì‚°ìœ„ë¸Œ ë“± ì¬ê°œë°œì´ ì§„í–‰ë˜ì–´ ì˜› ëª¨ìŠµì´ ì‚¬ë¼ì§€ê³  ìˆìŠµë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://mblogthumb-phinf.pstatic.net/MjAyMTA5MDJfNjMg/MDAxNjMwNTkwMDE4MTAy.zvEgJ80S2Jw7Xr1BJVga7vxtsskSBg6Nj-o5ofvwQQQg.byjZxlF7eeeaoaEQHfUTShjV-J6EEvzHRzuJNhTnKcEg.JPEG.cooolbusan/SE-d8ac329b-2077-4aac-bd73-c3ff3d71984d.jpg?type=w800", "https://busan.grandculture.net/ImageView.aspx?fi=GC042P08721&t=middle&ext=jpg&iwm=1", "https://lh4.googleusercontent.com/proxy/cAKBbLTQGGTYUvIlxGg8O3AeRjoqzxgfy3flR2nIffrU7DjrCiTbBVUZ3KhYeFUGh-tPUAAbcRnZwgnlZWrCx2sBBxjRqMNqKXlOvKWF3LqcscG1wthxNjZehKrpusSpi4kaQQMj-w", "https://www.busan.com/nas/wcms/wcms_data/photos/2019/01/14/2019011419590655192_l.jpg", "https://image.kmib.co.kr/online_image/2020/1201/202012011938_11130924167543_1.jpg"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">ë§¤ì¶•ì§€ë§ˆì„</div>
    </div>

    <div class="travel-item" data-name="ë‚´í˜¸ëƒ‰ë©´" 
         data-info="[ì—­ì‚¬] 1919ë…„ í•¨ê²½ë‚¨ë„ í¥ë‚¨ì—ì„œ ì‹œì‘, 1952ë…„ ë¶€ì‚° ìš°ì•”ë™ì— ì •ì°©í•œ 100ë…„ ì „í†µ ë…¸í¬ì…ë‹ˆë‹¤. [ìœ ë˜] í•œêµ­ì „ìŸ ë‹¹ì‹œ êµ¬í˜¸ë¬¼ìì¸ ë°€ê°€ë£¨ë¥¼ ì‚¬ìš©í•´ ë§Œë“  ê²ƒì´ 'ë°€ë©´'ì˜ ì‹œì´ˆì…ë‹ˆë‹¤. [íŠ¹ì§•] í—ˆì˜ë§Œì˜ ì‹ê°ì— ì†Œê°œëœ ë°±ë…„ê°€ê²Œì´ë©°, í•œìš° ì‚¬ê³¨ ìœ¡ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://i.namu.wiki/i/5nw9ExRPlLEieuik2emhjjnHhATz38mnczgzMtBQi7kgn-HyEmoDAyLm_TZChG8c1xYN6NblwOTYJfblINQ6Rw.jpg", "https://www.busan.go.kr/comm/getImage?srvcId=MEDIA&upperNo=8357&fileTy=MEDIA&fileNo=1", "https://www.busan.go.kr/comm/getImage?srvcId=MEDIA&upperNo=8356&fileTy=MEDIA&fileNo=1", "https://busan.grandculture.net/ImageView.aspx?fi=GC042P11391&t=middle&ext=jpg&iwm=1", "https://ecimg.cafe24img.com/pg1419b11418548045/damda2024/web/product/extra/big/20250729/262f1e56c61b95915ebfac412814292b.jpg"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">ë‚´í˜¸ëƒ‰ë©´</div>
    </div>

    <div class="travel-item" data-name="ì´ê¸°ëŒ€" 
         data-info="[ì†Œê°œ] í•´ì•ˆ ì ˆë²½ê³¼ ìš¸ì°½í•œ ìˆ²ì´ ì–´ìš°ëŸ¬ì§„ í•´ì•ˆì‚°ì±…ë¡œ(4.7km)ì…ë‹ˆë‹¤. [ì—­ì‚¬] ê³¼ê±° êµ°ì‚¬ì‘ì „ì§€ì—­ìœ¼ë¡œ í†µì œë˜ì—ˆë‹¤ê°€ 1993ë…„ ê°œë°©ë˜ì—ˆìŠµë‹ˆë‹¤. [ë³¼ê±°ë¦¬] ê´‘ì•ˆëŒ€êµì™€ í•´ìš´ëŒ€ ë§ˆë¦°ì‹œí‹° ë·°ê°€ ì••ê¶Œì´ë©°, êµ­ê°€ì§€ì§ˆê³µì›ìœ¼ë¡œ ì§€ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì˜í™” 'í•´ìš´ëŒ€' ì´¬ì˜ì§€ì´ê¸°ë„ í•©ë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://lh5.googleusercontent.com/proxy/dmPKFte8g_gQ1xcSys6iZQjToSF0ijJFFSYoXp8z9n_HlFIg3hx5xK-F2tuvbYivf8A73dUHN1dMWlYHPnuWBy7pyIdSfFbN2roaNAgUzQ", "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/19/2d/66/20/img-20190909-wa0009-largejpg.jpg?w=900&h=-1&s=1", "https://www.busan.go.kr/humanframe/theme/geopark2022/assets/img/sub/geosite/igidae.jpg", "https://media.triple.guide/triple-cms/c_limit,f_auto,h_1024,w_1024/72ec14e8-7cfa-4a09-b3ac-589ed3864f16.jpeg", "https://mblogthumb-phinf.pstatic.net/MjAyMzA5MTdfMjkw/MDAxNjk0OTIwMDE2Njkw.sgRFMsH3T5kqlOQpfbrZH9uI4q60W2zDjDnyOeX3JMsg.RB6bOx8kI7vwwhBFCNhcylFpLlNg8P83Mj1bCzIOvpcg.JPEG.mixsun/17.JPG?type=w800"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">ì´ê¸°ëŒ€</div>
    </div>

    <div class="travel-item" data-name="ì—‘ìŠ¤ë” ìŠ¤ì¹´ì´" 
         data-info="[ìœ„ì¹˜] í•´ìš´ëŒ€ ì—˜ì‹œí‹° ëœë“œë§ˆí¬ íƒ€ì›Œ 98~100ì¸µ. [íŠ¹ì§•] ë†’ì´ 411.6më¡œ êµ­ë‚´ 2ë²ˆì§¸ ë†’ì€ ì „ë§ëŒ€ì…ë‹ˆë‹¤. [ë³¼ê±°ë¦¬] í•´ìš´ëŒ€ ë°”ë‹¤ì™€ ë¶€ì‚° ë„ì‹¬ì„ 360ë„ë¡œ ì¡°ë§í•  ìˆ˜ ìˆìœ¼ë©°, 99ì¸µì—ëŠ” ì„¸ê³„ì—ì„œ ê°€ì¥ ë†’ì€ ìŠ¤íƒ€ë²…ìŠ¤ê°€ ìˆìŠµë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://blog-static.kkday.com/ko/blog/wp-content/uploads/busan_x_the_sky_6.jpg", "https://ì—¬ê¸°ìœ .com/data/editor/2508/20250828101740_0edec1f12f71ce414a1cecc4f09af03c_7r60.jpg", "https://ticketimage.interpark.com/Play/image/large/Y5/Y5000024_p.gif", "https://dynamic-media-cdn.tripadvisor.com/media/photo-o/29/71/1c/45/caption.jpg?w=900&h=500&s=1", "https://blog-static.kkday.com/ko/blog/wp-content/uploads/busan_x_the_sky_3.jpg"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">ì—‘ìŠ¤ë” ìŠ¤ì¹´ì´</div>
    </div>

    <div class="travel-item" data-name="í•´ì–‘ ì—´ì°¨" 
         data-info="[ëª…ì¹­] í•´ìš´ëŒ€ ë¸”ë£¨ë¼ì¸íŒŒí¬ í•´ë³€ì—´ì°¨. [ê²½ë¡œ] ë¯¸í¬~ì†¡ì • (4.8km). [íŠ¹ì§•] ì˜› ë™í•´ë‚¨ë¶€ì„  íì„  ë¶€ì§€ë¥¼ í™œìš©í•´ ë°”ë‹¤ ë°”ë¡œ ì˜†ì„ ë‹¬ë¦¬ëŠ” ê´€ê´‘ ì—´ì°¨ì…ë‹ˆë‹¤. ëˆ„ì  ë°©ë¬¸ê° 270ë§Œ ëª…ì„ ë„˜ì€ ë¶€ì‚° ìµœê³ ì˜ í•«í”Œë ˆì´ìŠ¤ì…ë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://img2.daumcdn.net/thumb/R658x0.q70/?fname=https://t1.daumcdn.net/news/202512/28/fnnewsi/20251228184124939taoe.jpg", "https://image.fnnews.com/resource/media/image/2021/01/06/202101061045034751_l.jpg", "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcScWjeqnz3BUByUCN3lV5ab3TdDpAxDGQ-3Dw&s", "https://image.fnnews.com/resource/media/image/2025/12/07/202512071943426377_l.jpg", "https://www.ktsketch.co.kr/news/photo/202302/7407_37526_1527.jpg"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">í•´ì–‘ ì—´ì°¨</div>
    </div>

    <div class="travel-item" data-name="ê´‘ì•ˆë¦¬" 
         data-info="[ì†Œê°œ] ë¶€ì‚° ìµœê³ ì˜ ì•¼ê²½ ëª…ì†Œì´ì ì ŠìŒì˜ ê±°ë¦¬. [ëœë“œë§ˆí¬] ì´ê¸¸ì´ 7.42kmì˜ ê´‘ì•ˆëŒ€êµ(ë‹¤ì´ì•„ëª¬ë“œ ë¸Œë¦¿ì§€)ê°€ í•µì‹¬ì…ë‹ˆë‹¤. [ì¦ê¸¸ê±°ë¦¬] ë§¤ì£¼ í† ìš”ì¼ ë“œë¡ ì‡¼, ê°€ì„ ë¶€ì‚°ë¶ˆê½ƒì¶•ì œ, í•´ë³€ í…Œë§ˆê±°ë¦¬ì˜ ë²„ìŠ¤í‚¹ê³¼ ì¹´í˜ê°€ ìœ ëª…í•©ë‹ˆë‹¤.">
      <div class="slide-container" data-images='["https://www.busan.com/nas/wcms/wcms_data/photos/2024/05/29/2024052914085206452_l.jpg", "https://cdn.informaticsview.com/news/photo/202411/829_3479_3214.jpg", "https://www.visitbusan.net/uploadImgs/files/cntnts/20191229160530047_oen", "https://i.namu.wiki/i/I-9gkCr9E7fgXSFSfEvHBxpnwynHomS89mRVSWKHL_-TbPTZMli0W4UvKHRj2-DaW8kk_pB701cKtoIQxirQvw.webp", "https://mywebring.com/wp-content/uploads/2025/01/WycRqSjG5DHRghc30APRPIiGStu64ygdJxkb-pWnyHFNK_7HmyEeBkZtEJhgQIdxziuad4c-RKfPt-J28I7C1g.webp"]'></div>
      <div class="overlay"></div>
      <div class="travel-name">ê´‘ì•ˆë¦¬</div>
    </div>
  </div>

  <div id="chat-page">
    <button class="close-chat-btn" onclick="closeChat()">ë‚˜ê°€ê¸°</button>
    <div id="chat-container"></div>
  </div>

  <div class="bottom-bar-container">
    <button id="detail-btn" onclick="openChat()">ë¶€ì‚° ìì„¸íˆ ì•Œì•„ë³´ê¸°</button>
    <div id="chat-input-bar">
      <input type="text" id="chat-input" class="chat-input" placeholder="ë” ê¶ê¸ˆí•œ ì ì„ AIì—ê²Œ ë¬¼ì–´ë³´ì„¸ìš”..." onkeypress="if(event.keyCode==13) handleSend()">
      <button class="send-btn" onclick="handleSend()">â†‘</button>
    </div>
  </div>

  <script>
    const API_KEY = "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";
    
    // ì´ˆê¸°í™”: ì²« ë²ˆì§¸ í•­ëª© ë°ì´í„° ì„¤ì • (undefined ë°©ì§€)
    let currentPlace = "ë¶€ì‚°ê´‘ì—­ì‹œ";
    let currentInfo = document.querySelector('.travel-item').dataset.info;

    function toggleMenu() { document.getElementById('side-menu').classList.toggle('active'); }
    function toggleDarkMode() { document.body.setAttribute('data-theme', document.body.getAttribute('data-theme') === 'dark' ? '' : 'dark'); toggleMenu(); }

    // IntersectionObserver
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting) {
          currentPlace = entry.target.dataset.name;
          currentInfo = entry.target.dataset.info;
          
          const btn = document.getElementById('detail-btn');
          btn.innerText = `${currentPlace} ìì„¸íˆ ì•Œì•„ë³´ê¸°`;
          btn.style.background = entry.target.classList.contains('special-city') ? 'var(--accent)' : 'var(--primary)';
        }
      });
    }, { threshold: 0.6 });
    document.querySelectorAll('.travel-item').forEach(el => observer.observe(el));

    // ì±„íŒ… ì—´ê¸°
    function openChat() {
      // ì•ˆì „ì¥ì¹˜: ì •ë³´ê°€ í˜¹ì‹œ ì—†ìœ¼ë©´ ë‹¤ì‹œ ê°€ì ¸ì˜´
      if(!currentInfo) {
         // í˜„ì¬ í™”ë©´ì— ë³´ì´ëŠ” ìš”ì†Œë¥¼ ì°¾ì•„ ì¬ì„¤ì •
         // (ê°„ë‹¨íˆ ì²«ë²ˆì§¸ ìš”ì†Œë¡œ fallbackí•˜ê±°ë‚˜, í˜„ì¬ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ê¸°ë°˜ ê³„ì‚° ê°€ëŠ¥í•˜ë‚˜ ì—¬ê¸°ì„  ê¸°ì¡´ ê°’ ìœ ì§€)
      }

      document.getElementById('travel-list').classList.add('blurred');
      document.getElementById('chat-page').classList.add('active');
      document.getElementById('detail-btn').style.display = 'none';
      document.getElementById('chat-input-bar').style.display = 'flex';
      
      const container = document.getElementById('chat-container');
      // ì±„íŒ…ë°© ë‚´ìš© ì´ˆê¸°í™” (ìƒˆ ì¥ì†Œ ì—´ ë•Œë§ˆë‹¤ ê¹”ë”í•˜ê²Œ)
      container.innerHTML = ""; 
      addMessage(`<b>${currentPlace}</b>ì— ëŒ€í•´ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤!`, 'ai');
      
      // ì¤„ë°”ê¿ˆ íƒœê·¸ ì²˜ë¦¬í•˜ì—¬ ê°€ë…ì„± ë†’ì„
      const formattedInfo = currentInfo ? currentInfo.replace(/\[/g, '<br><b>[').replace(/\]/g, ']</b>') : "ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤.";
      addMessage(formattedInfo, 'ai');
      
      setTimeout(() => document.getElementById('chat-input').focus(), 400);
    }

    // ì±„íŒ… ë‹«ê¸°
    function closeChat() {
      document.getElementById('travel-list').classList.remove('blurred');
      document.getElementById('chat-page').classList.remove('active');
      document.getElementById('detail-btn').style.display = 'block';
      document.getElementById('chat-input-bar').style.display = 'none';
    }

    // ë©”ì‹œì§€ ì „ì†¡
    async function handleSend() {
      const input = document.getElementById('chat-input');
      const text = input.value.trim();
      if(!text) return;

      addMessage(text, 'user');
      input.value = "";
      const aiMsgDiv = addMessage('<div class="loading-dots"><span></span><span></span><span></span></div>', 'ai');

      try {
        const response = await fetch("https://api.perplexity.ai/chat/completions", {
          method: "POST",
          headers: { "Authorization": `Bearer ${API_KEY}`, "Content-Type": "application/json" },
          body: JSON.stringify({
            model: "sonar",
            messages: [
              { role: "system", content: `ë‹¹ì‹ ì€ ë¶€ì‚° íˆ¬ì–´ê°€ì´ë“œì…ë‹ˆë‹¤. í˜„ì¬ ì¥ì†Œ: ${currentPlace}. ì œê³µëœ ì •ë³´: ${currentInfo}. ì´ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì‚¬ìš©ìì˜ ì§ˆë¬¸ì— ì¹œì ˆí•˜ê³  ì „ë¬¸ì ìœ¼ë¡œ ë‹µë³€í•˜ì„¸ìš”. (ì†ŒìŠ¤ ì¸ìš© ë¶ˆí•„ìš”)` },
              { role: "user", content: text }
            ]
          })
        });
        const data = await response.json();
        aiMsgDiv.innerHTML = data.choices[0].message.content.replace(/\n/g, '<br>');
      } catch (error) {
        aiMsgDiv.innerText = "ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
      }
    }

    function addMessage(text, sender) {
      const container = document.getElementById('chat-container');
      const div = document.createElement('div');
      div.className = `message ${sender}`;
      div.innerHTML = text;
      container.appendChild(div);
      container.scrollTop = container.scrollHeight;
      return div;
    }

    // ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œ
    window.onload = () => {
      document.querySelectorAll('.slide-container').forEach(container => {
        const images = JSON.parse(container.dataset.images);
        images.forEach((src, idx) => {
          const img = document.createElement('img');
          img.src = src; img.className = 'slide-img' + (idx === 0 ? ' active' : '');
          container.appendChild(img);
        });
        let currentIdx = 0;
        setInterval(() => {
          const slides = container.querySelectorAll('.slide-img');
          slides[currentIdx].classList.remove('active');
          currentIdx = (currentIdx + 1) % slides.length;
          slides[currentIdx].classList.add('active');
        }, 2000);
      });
    };
  </script>
</body>
</html>