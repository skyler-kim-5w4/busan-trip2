<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0A3D6B">
  <title>2026 ë¶€ì‚° ì—¬í–‰ - AI íˆ¬ì–´ê°€ì´ë“œ</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&family=Playfair+Display:wght@700;800&display=swap" rel="stylesheet">
  <style>
    :root {
      --primary: #0A3D6B;
      --accent: #FF5E3A;
      --text: #0F172A;
      --text-light: #64748B;
      --bg: #F8FAFC;
      --glass: rgba(255, 255, 255, 0.75);
      --glass-strong: rgba(255, 255, 255, 0.9);
      --shadow: 0 12px 40px rgba(10, 61, 107, 0.15);
      --border: 1px solid rgba(255,255,255,0.4);
      --menu-btn: #0A3D6B;
    }

    [data-theme="dark"] {
      --primary: #60A5FA;
      --accent: #FB923C;
      --text: #F1F5F9;
      --text-light: #94A3B8;
      --bg: #0F172A;
      --glass: rgba(30, 41, 59, 0.7);
      --glass-strong: rgba(15, 23, 42, 0.95);
      --shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
      --border: 1px solid rgba(255,255,255,0.1);
      --menu-btn: #FFFFFF;
    }

    * { margin:0; padding:0; box-sizing:border-box; -webkit-font-smoothing: antialiased; }
    html, body { height:100%; font-family:'Noto Sans KR', sans-serif; background:var(--bg); color:var(--text); transition: background 0.5s ease; overflow-x: hidden; }

    /* Header - Integrated Layout */
    header {
      position:fixed; top:0; left:0; right:0; height:70px;
      background:var(--glass-strong); backdrop-filter:blur(20px);
      z-index:1000; display:flex; align-items:center; justify-content:space-between;
      padding: 0 20px; border-bottom: var(--border);
    }
    .header-left { width: 40px; }
    .header-right { width: 40px; display: flex; justify-content: flex-end; }
    
    .menu-btn { background:none; border:none; font-size:1.6rem; color:var(--menu-btn); cursor:pointer; }
    .close-chat-btn { 
      background:none; border:none; font-size:1.8rem; color:var(--text); 
      cursor:pointer; display: none; /* Only show in chat page */
    }
    .main-title-container { text-align:center; flex: 1; }
    .main-title { font-family:'Playfair Display', serif; font-size:1.4rem; font-weight:800; color:var(--primary); }

    /* Side Menu */
    #side-menu {
      position:fixed; top:0; left:-100%; width:80%; max-width:300px; height:100%;
      background:var(--glass-strong); backdrop-filter:blur(30px);
      z-index:1100; transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      padding:100px 30px; box-shadow: var(--shadow); border-right: var(--border);
    }
    #side-menu.active { left:0; }
    #close-menu-btn { position: absolute; top: 25px; right: 25px; font-size: 2rem; background: none; border: none; color: var(--text); cursor: pointer; }
    .menu-item { padding:18px 0; font-size:1.1rem; font-weight:500; border-bottom: 1px solid rgba(0,0,0,0.05); cursor:pointer; list-style: none; }

    /* Pages */
    .page { position:fixed; inset:0; transition:0.6s cubic-bezier(0.4,0,0.2,1); opacity:0; pointer-events:none; }
    .page.active { opacity:1; pointer-events:auto; }

    /* Travel List Home */
    /* 1. ì»¨í…Œì´ë„ˆ ë¶€ë¶„ ìˆ˜ì • */
#travel-list {
  height: 100dvh; /* dvhëŠ” ëª¨ë°”ì¼ ì£¼ì†Œì°½ ëŒ€ì‘ì— í•„ìˆ˜ì…ë‹ˆë‹¤ */
  overflow-y: scroll;
  overflow-x: hidden;
  
  /* [ìˆ˜ì •] Unknown property ì—ëŸ¬ í•´ê²°: í‘œì¤€ ì†ì„± ì‚¬ìš© */
  scroll-snap-type: y mandatory; 
  
  /* iOSì—ì„œ ìŠ¤í¬ë¡¤ì„ ë” ë¶€ë“œëŸ½ê²Œ ë§Œë“­ë‹ˆë‹¤ */
  -webkit-overflow-scrolling: touch;
  scroll-behavior: smooth;
}

/* 2. ê°œë³„ ì•„ì´í…œ ë¶€ë¶„ ìˆ˜ì • */
.travel-item {
  height: 100dvh;
  width: 100%;
  
  /* [ìˆ˜ì •] Unknown property ì—ëŸ¬ í•´ê²°: í‘œì¤€ ì†ì„± ì‚¬ìš© */
  scroll-snap-align: start;
  
  /* í•œ ì¥ì”© ë”±ë”± ë©ˆì¶”ê²Œ í•˜ëŠ” ê°€ì´ë“œ ì¶”ê°€ */
  scroll-snap-stop: always;
  
  position: relative;
  background-color: #000;
  display: flex;
  align-items: center;
  justify-content: center;
}
    .travel-item img { width:100%; height:100%; object-fit:cover; opacity: 0.7; }
    .travel-name {
      position:absolute; bottom:25%; left:0; width:100%; text-align:center;
      font-size:3.5rem; color:white; font-weight:700; text-shadow:0 4px 15px rgba(0,0,0,0.8);
      z-index: 2;
    }

    /* Input Styling */
    .input-bar {
      position:fixed; bottom:30px; left:20px; right:20px;
      background:var(--glass); backdrop-filter:blur(25px);
      border-radius:30px; padding:8px 22px; display:flex; align-items:center;
      border: var(--border); box-shadow: var(--shadow); z-index:90;
    }
    .chat-input { flex:1; background:none; border:none; outline:none; font-size:1rem; color:var(--text); height:45px; }
    .send-btn { width:42px; height:42px; border-radius:50%; background:var(--accent); color:white; border:none; cursor:pointer; font-weight: bold; }

    /* Chat Messages */
    #chat-container { padding: 90px 20px 120px; height:100%; overflow-y:auto; display:flex; flex-direction:column; gap:15px; background: var(--bg); }
    .message { padding:14px 18px; border-radius:20px; max-width:85%; font-size:0.95rem; line-height:1.6; }
    .user { background: var(--primary); color:white; align-self: flex-end; border-bottom-right-radius:4px; }
    .ai { background: var(--glass); border: var(--border); color:var(--text); align-self: flex-start; border-bottom-left-radius:4px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }

    /* Loading UI */
    .loading-dots span { display: inline-block; width: 6px; height: 6px; background: var(--text-light); border-radius: 50%; animation: bounce 1.4s infinite; margin: 0 2px; }
    @keyframes bounce { 0%, 80%, 100% { transform: scale(0); } 40% { transform: scale(1); } }
  </style>
</head>
<body>

  <div id="side-menu">
    <button id="close-menu-btn" onclick="toggleMenu()">Ã—</button>
    <ul>
      <li class="menu-item" onclick="toggleTheme()"><span>ğŸŒ“</span>ë‹¤í¬ ëª¨ë“œ ì „í™˜</li>
      <li class="menu-item" onclick="alert('ì½”ë”©ì„ ì œëŒ€ë¡œ ë°°ìš´ì ì´ ì—†ì–´ì„œ AIì˜ ë„ì›€ì„ ë°›ì•„ ì‚¬ì´íŠ¸ë¥¼ ì œì‘í•˜ì˜€ìŠµë‹ˆë‹¤.')"><span>ğŸ§ </span>ê°œë°œì TMI</li>
      <li class="menu-item" onclick="alert('ì±„íŒ…ë´‡ì€ Perplexity APIë¥¼ í†µí•´ ìµœì‹  ì •ë³´ë¥¼ ì œê³µí•©ë‹ˆë‹¤.')"><span>ğŸ¤–</span>AI ëª¨ë¸ ì •ë³´</li>
      <li class="menu-item" onclick="alert('ë‚ ì”¨ê°€ ì¶”ìš¸ ìˆ˜ ìˆìœ¼ë‹ˆ ì˜·ì„ ë”°ëœ»í•˜ê²Œ ì…ìœ¼ì„¸ìš”!!')"><span>ğŸš‡</span>ì—¬í–‰ ê¿€íŒ</li>
    </ul>
  </div>

  <header>
    <div class="header-left">
      <button class="menu-btn" onclick="toggleMenu()">â˜°</button>
    </div>
    <div class="main-title-container">
      <div class="main-title">2026 BUSAN</div>
    </div>
    <div class="header-right">
      <button id="header-close-btn" class="close-chat-btn" onclick="goHome()">Ã—</button>
    </div>
  </header>

  <div id="home-page" class="page active">
    <div id="travel-list">
      <div class="travel-item" data-query="í•´ìš´ëŒ€ ë¸”ë£¨ë¼ì¸íŒŒí¬ ì˜ˆì•½ ë°©ë²•ê³¼ ëª…ë‹¹ ìë¦¬ ì¶”ì²œí•´ì¤˜">
        <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyNTA2MjNfMjkz%2FMDAxNzUwNjU5NDA2MTI3.rW5ux4a7qL8bx_YcQ4PwzYTZgSHsBz4nY24EEcyqCTgg.iwY22IO9vr9sVscRj4Rm0jY_RmOeSJCrl9DvTXUhDpwg.JPEG%2F2.JPG&type=sc960_832" alt="í•´ìš´ëŒ€">
        <div class="travel-name">í•´ìš´ëŒ€</div>
      </div>
      <div class="travel-item" data-query="ê°ì²œë¬¸í™”ë§ˆì„ ì–´ë¦°ì™•ì ë™ìƒ ì¤„ ì•ˆ ì„œëŠ” ì‹œê°„ëŒ€ëŠ”?">
        <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyMDA2MDdfMTIx%2FMDAxNTkxNDkxMDI1NjQ2.hwDBbaQ7JW7v0q5sjlG5MD0VUtwhcB-yYEBF2BV3eWEg.1vTZQuWIowu5o53Vi3hiDEm96fOG8Da7dOICVsRMLVAg.JPEG.hgshin98%2FDSC04128.jpg&type=sc960_832" alt="ê°ì²œ">
        <div class="travel-name">ê°ì²œë§ˆì„</div>
      </div>
      <div class="travel-item" data-query="ê´‘ì•ˆë¦¬ í•´ìˆ˜ìš•ì¥ ê·¼ì²˜ ë¶„ìœ„ê¸° ì¢‹ì€ ì¹´í˜ 3ê³³ ì¶”ì²œí•´ì¤˜">
        <img src="https://search.pstatic.net/common/?src=http%3A%2F%2Fblogfiles.naver.net%2FMjAyNTEwMjBfMzEg%2FMDAxNzYwOTE3MTc4OTQ4.WTAJqI780vzKEv5Z__wFqrGOEukncVL0wrSQ5ITPkCEg.7IpQYWN958mKxbNrSU_z_TtIY36u5Qv9jSZD21Ds-2Qg.JPEG%2F900%25A3%25DF1760915852326.jpg&type=sc960_832" alt="ê´‘ì•ˆë¦¬">
        <div class="travel-name">ê´‘ì•ˆë¦¬</div>
      </div>
    </div>
    <div class="input-bar">
      <input type="text" id="home-input" class="chat-input" placeholder="í•´ìš´ëŒ€ ë¸”ë£¨ë¼ì¸íŒŒí¬ íƒ€ëŠ” ë²• ì•Œë ¤ì¤˜">
      <button class="send-btn" onclick="handleSend('home')">â†’</button>
    </div>
  </div>

  <div id="chat-page" class="page">
    <div id="chat-container"></div>
    <div class="input-bar">
      <input type="text" id="chat-input" class="chat-input" placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">
      <button class="send-btn" onclick="handleSend('chat')">â†‘</button>
    </div>
  </div>

  <script>
    const API_KEY = "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"; // ì‹¤ì œ API í‚¤ ì…ë ¥ í•„ìš”
    let activePlaceholder = "í•´ìš´ëŒ€ ë¸”ë£¨ë¼ì¸íŒŒí¬ íƒ€ëŠ” ë²• ì•Œë ¤ì¤˜";

    function toggleMenu() { document.getElementById('side-menu').classList.toggle('active'); }

    // Navigation & Header Change
    function goHome() { 
        document.getElementById('chat-page').classList.remove('active');
        document.getElementById('home-page').classList.add('active');
        document.getElementById('header-close-btn').style.display = 'none'; // í—¤ë” X ë²„íŠ¼ ìˆ¨ê¹€
    }

    function goToChat() {
        document.getElementById('home-page').classList.remove('active');
        document.getElementById('chat-page').classList.add('active');
        document.getElementById('header-close-btn').style.display = 'block'; // í—¤ë” X ë²„íŠ¼ í‘œì‹œ
    }

    // Scroll Observer
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting) {
            activePlaceholder = entry.target.dataset.query;
            document.getElementById('home-input').placeholder = activePlaceholder;
        }
      });
    }, { threshold: 0.6 });
    document.querySelectorAll('.travel-item').forEach(el => observer.observe(el));

    // Perplexity API Send Logic
    async function handleSend(type) {
        const inputId = type === 'home' ? 'home-input' : 'chat-input';
        const inputEl = document.getElementById(inputId);
        let text = inputEl.value.trim();

        if (type === 'home' && !text) text = activePlaceholder;
        if (!text) return;

        if (type === 'home') goToChat();

        addMessage(text, 'user');
        inputEl.value = "";
        
        const aiMsgDiv = addMessage('<div class="loading-dots"><span></span><span></span><span></span></div>', 'ai');
        
        try {
            const response = await fetch("https://api.perplexity.ai/chat/completions", {
                method: "POST",
                headers: {
                    "Authorization": `Bearer ${API_KEY}`,
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    model: "sonar",
                    messages: [
                        { role: "system", content: "ë‹¹ì‹ ì€ 2026 ë¶€ì‚° íˆ¬ì–´ê°€ì´ë“œì…ë‹ˆë‹¤. ì‹¤ì‹œê°„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°„ê²°í•˜ê³  ì„¸ë ¨ë˜ê²Œ ë‹µë³€í•˜ì„¸ìš”." },
                        { role: "user", content: text }
                    ]
                })
            });

            const data = await response.json();
            aiMsgDiv.innerHTML = data.choices[0].message.content.replace(/\n/g, '<br>');
        } catch (error) {
            aiMsgDiv.innerText = "API ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. í‚¤ ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
        }
        
        const container = document.getElementById('chat-container');
        container.scrollTop = container.scrollHeight;
    }

    function addMessage(text, sender) {
        const container = document.getElementById('chat-container');
        const div = document.createElement('div');
        div.className = `message ${sender}`;
        div.innerHTML = text;
        container.appendChild(div);
        container.scrollTop = container.scrollHeight;
        return div;
    }

    function toggleTheme() {
      const body = document.body;
      body.setAttribute('data-theme', body.getAttribute('data-theme') === 'dark' ? 'light' : 'dark');
      toggleMenu();
    }
  </script>
</body>
</html>